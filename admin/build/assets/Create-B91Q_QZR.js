import{r as d,k as x,h as j,u as y,v as C,j as e,E as m}from"./index-Huc91Zyl.js";import{u as N,C as v,d as b,e as F}from"./DefaultLayout-Cszy7XE9.js";import{C as f,a as q,b as P}from"./cil-user-BsmUpXmw.js";import{c as t,d as c,a as S}from"./index.esm-Bue5CfUv.js";const E=()=>{d.useState([]),x();const{register:i,handleSubmit:l,reset:p,formState:{errors:r}}=N(),{userList:o}=j(s=>s.users),n=y();d.useEffect(()=>{n(C())},[n]),console.log(o);const u=async s=>{try{const a=new FormData;a.append("file",s.image[0]),a.append("upload_preset","project"),a.append("cloud_name","dguyjd0no");const g=await m.post("https://api.cloudinary.com/v1_1/dguyjd0no/image/upload",a),h={productName:s.name,category:s.category,Price:s.price,Description:s.description,Image:g.data.secure_url};await m.post("http://localhost:5000/Product",h),p()}catch(a){console.error("Error uploading image:",a)}};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container mt-5",children:e.jsxs(f,{children:[e.jsx(v,{children:e.jsx("h2",{children:"Create Product"})}),e.jsx(q,{children:e.jsxs(P,{onSubmit:l(u),children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{htmlFor:"category",children:"Category"}),e.jsxs(b,{id:"category",name:"category",...i("category",{required:"Category is required"}),children:[e.jsx("option",{value:"",children:"-- Select Category --"}),o.map(s=>e.jsx("option",{value:s._id,children:s.cat_name},s.id))]}),r.category&&e.jsx("p",{className:"text-danger",children:r.category.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{htmlFor:"name",children:"Product Name"}),e.jsx(c,{type:"text",id:"name",name:"name",...i("name",{required:"Product Name is required"})}),r.name&&e.jsx("p",{className:"text-danger",children:r.name.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{htmlFor:"price",children:"Price"}),e.jsx(c,{type:"number",id:"price",name:"price",...i("price",{required:"Price is required",valueAsNumber:!0,min:{value:1,message:"Price should be at least 1"}})}),r.price&&e.jsx("p",{className:"text-danger",children:r.price.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{htmlFor:"description",children:"Description"}),e.jsx(F,{id:"description",name:"description",rows:"4",...i("description",{required:"Description is required",minLength:{value:10,message:"Description must be at least 10 characters"}})}),r.description&&e.jsx("p",{className:"text-danger",children:r.description.message})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx(t,{htmlFor:"Image",children:"Upload Image"}),e.jsx(c,{id:"image",type:"file",...i("image",{required:"Image is required"}),className:`form-control ${r.image?"is-invalid":""}`}),r.categoryName&&e.jsx(CAlert,{color:"danger",children:r.Image.message})]}),e.jsx(S,{type:"submit",color:"primary",children:"Submit"})]})})]})})})};export{E as default};
